<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>MAE Academy – Process Control</title>

<style>
/* =========================================================
   GLOBAL
========================================================= */
:root{
  --bg:#dcecff;
  --ink:#0b0b0b;
  --card:#ffffff;
  --muted:#666;
  --line:#000;
  --accent:#007bff;
}

*{box-sizing:border-box}

html,body{
  margin:0;
  background:var(--bg);
  color:var(--ink);
  font-family:
    "AppleGothic",
    "Apple SD Gothic Neo",
    "SF Pro Display",
    -apple-system,
    BlinkMacSystemFont,
    "Segoe UI",
    Arial,
    sans-serif;
}

/* =========================================================
   SCREEN SYSTEM
========================================================= */
.screen{
  display:none;
  min-height:100vh;
  width:100%;
}
.screen.active{display:flex}

/* =========================================================
   HOME
========================================================= */
#home{
  justify-content:center;
  align-items:center;
  padding:60px;
}

.home-wrap{
  width:100%;
  max-width:1400px;
  display:grid;
  grid-template-columns:1.25fr .9fr;
  gap:90px;
  align-items:center;
}

.hero h1{
  margin:0;
  line-height:.95;
  letter-spacing:-1px;
}
.hero .a{font-size:92px;font-weight:800}
.hero .b{font-size:92px;font-weight:900}

.hero .sub{
  margin:60px 0 30px;
  font-size:22px;
  font-weight:600;
}

.hero .btns{
  width:420px;
  display:flex;
  flex-direction:column;
  gap:18px;
}

.pill{
  height:66px;
  border-radius:16px;
  background:#fff;
  border:3px solid var(--line);
  font-size:22px;
  font-weight:900;
  display:flex;
  justify-content:center;
  align-items:center;
  cursor:pointer;
  box-shadow:0 7px 0 rgba(0,0,0,.15);
  transition:.12s;
}
.pill:hover{transform:translateY(-2px)}
.pill:active{
  transform:translateY(3px);
  box-shadow:0 3px 0 rgba(0,0,0,.15)
}

/* ID CARD */
.card{
  width:520px;
  aspect-ratio:3/4;
  background:#fff;
  border:4px solid #000;
  border-radius:34px;
  padding:36px 28px 26px;
  display:flex;
  flex-direction:column;
  justify-content:space-between;
  align-items:center;
  box-shadow:10px 12px 0 rgba(0,0,0,.08);
}
.logo{
  flex:1;
  display:flex;
  justify-content:center;
  align-items:center;
}
.logo img{width:76%}
.card .mae{
  font-size:74px;
  font-weight:900;
  letter-spacing:18px;
  padding-left:18px;
}
.card .name{
  font-size:36px;
  font-weight:900;
  white-space:nowrap;
}

/* =========================================================
   MENU
========================================================= */
#menu{
  flex-direction:column;
  align-items:center;
  padding:60px;
}
.back{
  align-self:flex-start;
  margin-bottom:30px;
  font-size:18px;
  cursor:pointer;
  font-weight:700;
}
.menu-wrap{
  text-align:center;
}
.menu-wrap h2{
  font-size:64px;
  margin:0;
}
.menu-wrap p{
  margin:20px 0 40px;
  font-size:18px;
}

/* =========================================================
   SIMULATOR
========================================================= */
#sim{
  flex-direction:column;
  align-items:center;
  padding:30px;
}

.sim-wrap{
  width:100%;
  max-width:1200px;
}

.row{
  display:grid;
  grid-template-columns:2fr 1fr;
  gap:20px;
}

.panel{
  background:#fff;
  border:1px solid #ddd;
  border-radius:8px;
  padding:10px;
  position:relative;
}

.panel span{
  font-weight:700;
  font-size:13px;
  color:#555;
}

canvas{
  width:100%;
  height:360px;
  display:block;
}

/* CONTROLS */
.controls{
  margin-top:20px;
  background:#f8f9fa;
  border-radius:8px;
  padding:20px;
  display:grid;
  grid-template-columns:1fr 1fr 1fr;
  gap:20px;
}

.col h4{
  margin:0 0 10px;
  font-size:14px;
  font-weight:800;
  border-bottom:2px solid #ddd;
  padding-bottom:5px;
}

label{
  display:flex;
  justify-content:space-between;
  font-size:13px;
  font-weight:600;
}

input[type=range],select{
  width:100%;
}

/* STATUS */
.status{
  margin-top:10px;
  padding:6px;
  font-weight:800;
  text-align:center;
  border-radius:4px;
}
.ok{background:#d4edda;color:#155724}
.bad{background:#f8d7da;color:#721c24}

/* =========================================================
   RESPONSIVE
========================================================= */
@media(max-width:1000px){
  .home-wrap{grid-template-columns:1fr;text-align:center}
  .hero .btns{margin:auto}
  .row{grid-template-columns:1fr}
  .controls{grid-template-columns:1fr}
}
</style>
</head>

<body>

<!-- HOME -->
<section id="home" class="screen active">
  <div class="home-wrap">
    <div class="hero">
      <h1 class="a">Welcome to</h1>
      <h1 class="b">MAE Academy</h1>
      <div class="sub">Learn & Enjoy</div>
      <div class="btns">
        <div class="pill">Academic Courses</div>
        <div class="pill" onclick="go('menu')">Practical Simulations</div>
      </div>
    </div>

    <div class="card">
      <div class="logo">
        <img src="assets/mae.svg">
      </div>
      <div class="mae">MAE</div>
      <div class="name">MOHAMMAD ABU ELYAN</div>
    </div>
  </div>
</section>

<!-- MENU -->
<section id="menu" class="screen">
  <div class="back" onclick="go('home')">← Back</div>
  <div class="menu-wrap">
    <h2>Simulations</h2>
    <p>Select a module</p>
    <div class="pill" onclick="startSim()">Process Control System</div>
  </div>
</section>

<!-- SIMULATOR -->
<section id="sim" class="screen">
  <div class="back" onclick="go('menu')">← Back</div>
  <div class="sim-wrap">

    <div class="row">
      <div class="panel">
        <span>Time Response (scroll mouse = SP)</span>
        <canvas id="plot" width="800" height="360"></canvas>
      </div>
      <div class="panel">
        <span>Root Locus</span>
        <canvas id="roots" width="300" height="360"></canvas>
      </div>
    </div>

    <div class="controls">
      <div class="col">
        <h4>Plant</h4>
        <label>ωn <span id="vwn">5</span></label>
        <input type="range" min="1" max="15" step=".5" value="5" id="wn">
        <label>ζ <span id="vz">0.5</span></label>
        <input type="range" min="0" max="2" step=".05" value=".5" id="z">
      </div>

      <div class="col">
        <h4>PID</h4>
        <label>Kp <span id="vkp">5</span></label>
        <input type="range" min="0" max="50" step=".5" value="5" id="kp">
        <label>Ki <span id="vki">1</span></label>
        <input type="range" min="0" max="20" step=".2" value="1" id="ki">
        <label>Kd <span id="vkd">2</span></label>
        <input type="range" min="0" max="20" step=".2" value="2" id="kd">
      </div>

      <div class="col">
        <h4>Status</h4>
        <div id="stat" class="status ok">Stable</div>
        <div style="margin-top:10px;font-size:13px;color:#555">
          Time axis = real seconds<br>
          Scroll mouse = change SP
        </div>
      </div>
    </div>

  </div>
</section>

<script>
/* =========================================================
   NAV
========================================================= */
function go(id){
  document.querySelectorAll('.screen').forEach(s=>s.classList.remove('active'));
  document.getElementById(id).classList.add('active');
}
function startSim(){
  go('sim');
  if(!window.started) init();
}

/* =========================================================
   SIM CORE
========================================================= */
let plot = document.getElementById("plot");
let ctx = plot.getContext("2d");
let rcan = document.getElementById("roots");
let rctx = rcan.getContext("2d");

let sp = 50;
let pv = 0, vel = 0, integ = 0, last = 0;
let hist = [];
let t = 0;

function init(){
  window.started = true;

  plot.addEventListener("wheel",e=>{
    e.preventDefault();
    sp += e.deltaY>0?-5:5;
    sp = Math.max(0,Math.min(150,sp));
  });

  document.querySelectorAll("input").forEach(i=>{
    i.oninput = ()=>document.getElementById("v"+i.id).innerText=i.value;
  });

  loop();
}

function loop(){
  physics();
  drawPlot();
  drawRoots();
  requestAnimationFrame(loop);
}

function physics(){
  let wn = +wnEl.value;
  let z = +zEl.value;
  let kp = +kpEl.value;
  let ki = +kiEl.value;
  let kd = +kdEl.value;

  let err = sp - pv;
  integ += err*.02;
  let u = kp*err + ki*integ + kd*(err-last)/.02;

  let acc = wn*wn*u - 2*z*wn*vel - wn*wn*pv;
  vel += acc*.02;
  pv += vel*.02;

  last = err;
  t += .02;

  hist.push({t,sp,pv});
  if(hist.length>600) hist.shift();

  document.getElementById("stat").className =
    Math.abs(pv)>1e4 ? "status bad":"status ok";
}

function drawPlot(){
  ctx.clearRect(0,0,800,360);
  ctx.strokeStyle="#ddd";
  for(let i=0;i<=10;i++){
    let y = i*36;
    ctx.beginPath();ctx.moveTo(0,y);ctx.lineTo(800,y);ctx.stroke();
  }

  ctx.beginPath();ctx.strokeStyle="#aaa";ctx.setLineDash([6,6]);
  hist.forEach((h,i)=>{
    let x = i/hist.length*800;
    let y = 360-(h.sp/150)*360;
    i?ctx.lineTo(x,y):ctx.moveTo(x,y);
  });
  ctx.stroke();

  ctx.beginPath();ctx.strokeStyle="#007bff";ctx.setLineDash([]);
  hist.forEach((h,i)=>{
    let x = i/hist.length*800;
    let y = 360-(h.pv/150)*360;
    i?ctx.lineTo(x,y):ctx.moveTo(x,y);
  });
  ctx.stroke();
}

function drawRoots(){
  rctx.clearRect(0,0,300,360);
  rctx.strokeStyle="#ccc";
  rctx.beginPath();
  rctx.moveTo(150,0);rctx.lineTo(150,360);
  rctx.moveTo(0,180);rctx.lineTo(300,180);
  rctx.stroke();

  let wn = +wnEl.value;
  let z = +zEl.value;
  let re = -z*wn;
  let im = wn*Math.sqrt(Math.max(0,1-z*z));

  plotX(re,im);
  plotX(re,-im);
}

function plotX(re,im){
  let x = 150 + re*10;
  let y = 180 - im*10;
  rctx.strokeStyle="red";
  rctx.beginPath();
  rctx.moveTo(x-5,y-5);
  rctx.lineTo(x+5,y+5);
  rctx.moveTo(x+5,y-5);
  rctx.lineTo(x-5,y+5);
  rctx.stroke();
}

const wnEl=wn, zEl=z, kpEl=kp, kiEl=ki, kdEl=kd;
</script>
</body>
</html>
